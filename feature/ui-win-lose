/* ========================================
  ui.js - å‹æ•—æ¼”å‡º & é§’ç§»å‹•éŸ³ï¼ˆBæ‹…å½“ç”¨ï¼‰
  - å‹åˆ© / æ•—åŒ—æ™‚ã«éŸ³æ¥½å†ç”Ÿ
  - ç”»é¢ä¸­å¤®ã«ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤º
  - é§’ã‚’å‹•ã‹ã—ãŸã¨ãã«éŸ³ã‚’å†ç”Ÿ
======================================== */

// ----------------------------
// éŸ³å£°ãƒ•ã‚¡ã‚¤ãƒ«èª­ã¿è¾¼ã¿
// ----------------------------
const moveSound = new Audio('./assets/audio/sfx/move.mp3'); // é§’ã‚’å‹•ã‹ã—ãŸéŸ³
const winSound  = new Audio('./assets/audio/sfx/win.mp3');  // å‹åˆ©éŸ³
const loseSound = new Audio('./assets/audio/sfx/lose.mp3'); // æ•—åŒ—éŸ³

// ----------------------------
// ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤ºç”¨ div ã‚’ä½œæˆ
// ----------------------------
const messageDiv = document.createElement('div');
messageDiv.style.position = 'fixed';             // ç”»é¢ä¸Šã«å›ºå®š
messageDiv.style.top = '50%';                    // ç¸¦ä¸­å¤®
messageDiv.style.left = '50%';                   // æ¨ªä¸­å¤®
messageDiv.style.transform = 'translate(-50%, -50%)'; // å®Œå…¨ä¸­å¤®
messageDiv.style.padding = '20px 40px';         // å†…å´ä½™ç™½
messageDiv.style.background = 'rgba(0,0,0,0.8)'; // åŠé€æ˜é»’èƒŒæ™¯
messageDiv.style.color = '#fff';                // ç™½æ–‡å­—
messageDiv.style.fontSize = '24px';             // æ–‡å­—ã‚µã‚¤ã‚º
messageDiv.style.borderRadius = '10px';         // è§’ä¸¸
messageDiv.style.textAlign = 'center';          // ä¸­å¤®æƒãˆ
messageDiv.style.zIndex = '9999';               // å‰é¢ã«è¡¨ç¤º
messageDiv.style.display = 'none';              // åˆæœŸã¯éè¡¨ç¤º
document.body.appendChild(messageDiv);          // body ã«è¿½åŠ 

// ----------------------------
// é§’ç§»å‹•éŸ³å†ç”Ÿé–¢æ•°
// ----------------------------
function playMoveSound() {
  moveSound.currentTime = 0; // å†ç”Ÿä½ç½®ã‚’å…ˆé ­ã«æˆ»ã™
  moveSound.play();          // å†ç”Ÿ
}

// ----------------------------
// å‹åˆ©æ¼”å‡ºé–¢æ•°
// ----------------------------
function showWinMessage(prefName) {
  messageDiv.innerText = `


/* ========================================
  ui.js - å‹æ•—æ¼”å‡ºï¼ˆBæ‹…å½“ç”¨ï¼‰
  - å‹åˆ© / æ•—åŒ—æ™‚ã«éŸ³æ¥½å†ç”Ÿ
  - ç”»é¢ä¸­å¤®ã«ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤º
======================================== */

// å‹åˆ©ç”¨ã‚µã‚¦ãƒ³ãƒ‰ãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿è¾¼ã‚€
const winSound = new Audio('./assets/audio/sfx/win.mp3');
// æ•—åŒ—ç”¨ã‚µã‚¦ãƒ³ãƒ‰ãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿è¾¼ã‚€
const loseSound = new Audio('./assets/audio/sfx/lose.mp3');

// ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤ºç”¨ã® div ã‚’ä½œæˆã—ã¦ç”»é¢ã«è¿½åŠ 
const messageDiv = document.createElement('div');
messageDiv.style.position = 'fixed';             // ç”»é¢ä¸Šã«å›ºå®š
messageDiv.style.top = '50%';                    // ç¸¦ä¸­å¤®
messageDiv.style.left = '50%';                   // æ¨ªä¸­å¤®
messageDiv.style.transform = 'translate(-50%, -50%)'; // å®Œå…¨ä¸­å¤®ã«é…ç½®
messageDiv.style.padding = '20px 40px';         // å†…å´ä½™ç™½
messageDiv.style.background = 'rgba(0,0,0,0.8)';// åŠé€æ˜é»’èƒŒæ™¯
messageDiv.style.color = '#fff';                // ç™½æ–‡å­—
messageDiv.style.fontSize = '24px';             // æ–‡å­—ã‚µã‚¤ã‚º
messageDiv.style.borderRadius = '10px';         // è§’ä¸¸
messageDiv.style.textAlign = 'center';          // ä¸­å¤®æƒãˆ
messageDiv.style.zIndex = '9999';               // ä»–ã®è¦ç´ ã‚ˆã‚Šå‰é¢ã«è¡¨ç¤º
messageDiv.style.display = 'none';              // æœ€åˆã¯éè¡¨ç¤º
document.body.appendChild(messageDiv);          // body ã«è¿½åŠ 

// ----------------------------
// å‹åˆ©æ¼”å‡ºé–¢æ•°
// prefName: å‹åˆ©ã—ãŸæ­¦å°†ã®åå‰
// ----------------------------
function showWinMessage(prefName) {
  messageDiv.innerText = `å‹åˆ©ï¼${prefName}ã®æ­¦å°†ã‚’å€’ã—ãŸï¼ğŸ‰`; // ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¨­å®š
  messageDiv.style.background = 'rgba(31,111,235,0.9)';           // é’ç³»èƒŒæ™¯
  messageDiv.style.display = 'block';                              // è¡¨ç¤º

  // éŸ³ã‚’å†ç”Ÿ
  winSound.currentTime = 0;  // å†ç”Ÿä½ç½®ã‚’å…ˆé ­ã«æˆ»ã™
  winSound.play();

  // 3ç§’å¾Œã«ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è‡ªå‹•éè¡¨ç¤º
  setTimeout(() => {
    messageDiv.style.display = 'none';
  }, 3000);
}

// ----------------------------
// æ•—åŒ—æ¼”å‡ºé–¢æ•°
// prefName: æ•—åŒ—ã—ãŸæ­¦å°†ã®åå‰
// ----------------------------
function showLoseMessage(prefName) {
  messageDiv.innerText = `æ•—åŒ—â€¦${prefName}ã®æ­¦å°†ã«è² ã‘ãŸâ€¦ğŸ’¦\nã¡ã‚ã‚Šï½ã‚“ã€é¼»ã‹ã‚‰ç‰›ä¹³ï½`; // ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¨­å®š
  messageDiv.style.background = 'rgba(235,31,31,0.9)'; // èµ¤ç³»èƒŒæ™¯
  messageDiv.style.display = 'block';                  // è¡¨ç¤º

  // éŸ³ã‚’å†ç”Ÿ
  loseSound.currentTime = 0; // å†ç”Ÿä½ç½®ã‚’å…ˆé ­ã«æˆ»ã™
  loseSound.play();

  // 3ç§’å¾Œã«ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è‡ªå‹•éè¡¨ç¤º
  setTimeout(() => {
    messageDiv.style.display = 'none';
  }, 3000);
}

/* ä½¿ã„æ–¹ä¾‹
  å‹åˆ©æ™‚: showWinMessage('å¾³å·å®¶åº·')
  æ•—åŒ—æ™‚: showLoseMessage('å¾³å·å®¶åº·')
*/
